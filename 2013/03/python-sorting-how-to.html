<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>[python]排序（Sorting Mini-HOW TO）</title>
  <meta name="author" content="mozillazg">

    <link href="http://mozillazg.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
        title="Mozillazg's Blog Atom Feed" />
    
  
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="http://mozillazg.com/favicon.png" rel="icon">
  <link href="http://mozillazg.com/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="http://mozillazg.com/theme/js/modernizr-2.0.js"></script>
  <script src="http://mozillazg.com/theme/js/ender.js"></script>
  <script src="http://mozillazg.com/theme/js/octopress.js" type="text/javascript"></script>

    </head>

<body class="collapse-sidebar">
  <header role="banner"><hgroup>
  <h1><a href="http://mozillazg.com/">Mozillazg's Blog</a></h1>
  </hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
    <li><a href="http://mozillazg.com/feeds/all.atom.xml" rel="subscribe-atom">Atom</a></li>
    </ul>


<form action="http://google.com/search" method="get">
  <fieldset role="search">
        <input type="hidden" name="q" value="site:mozillazg.com" />
        <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<ul class="main-navigation">
      <li><a href="/index.html">Home</a></li>
      <li><a href="/archives.html">Archives</a></li>
              </ul></nav>
  <div id="main">
    <div id="content">
      <div>
  <article class="hentry" role="article">
    <header>
                          
    <div id="qr-code-2013/03/python-sorting-how-to.html" class="qr-code-image-block"></div>
    <script src="http://mozillazg.com/theme/js/qr.min.js" type="text/javascript"></script>
    <script>
        var img = qr.image({
            value: 'http://mozillazg.com/2013/03/python-sorting-how-to.html',
            level: 'L',
            size: 4
        });
        document.getElementById('qr-code-2013/03/python-sorting-how-to.html').appendChild(img);
    </script>
          <h1 class="entry-title">[python]排序（Sorting Mini-HOW TO）</h1>
          <p class="meta"><time datetime="2013-03-03T00:00:00" pubdate>周日 03 三月 2013</time></p>
</header>

  <div class="entry-content"><p> 本文整理自  <a href="http://wiki.python.org/moin/HowTo/Sorting/">HowTo/Sorting - Python Wiki</a>， 如有不妥之处 ， 请翻阅英文原文 。</p>
<p>Python  内置的  <code>sort()</code>  方法可以实现对列表的原地排序功能 。 内置的  <code>sorted()</code>  函数则不会修改原列表 ， 而是生成一个经过排序的新列表 。</p>
<p> 下面总结一些常用的排序方法 。</p>
<h2 id="_1"> 基本排序 </h2>
<p> 最简单的方法就是使用  <code>sorted()</code>  函数 ， 它将返回一个经过排序的新列表 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</pre></div>


<p> 你也可以使用  <code>list.sort()</code>  方法 ，  但是它会修改原列表 ， 所以一般使用  <code>sorted()</code>。 如果你不再需要原始列表的话 ， 用用  <code>list.sort()</code>  也无妨 。</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</pre></div>


<p> 另一个不同点是 ，<code>list.sort()</code>  方法只能作用于列表 ， 而  <code>sorted()</code>  函数则接受任何可迭代对象 。</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="s">&#39;A&#39;</span><span class="p">})</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</pre></div>


<h2 id="key">Key  函数 </h2>
<p> 从  Python 2.4  开始 ， <code>list.sort()</code>  及  <code>sorted()</code>  增加了一个  <code>key</code>  参数 ， 该参数接受一个函数作为它的值 ， 可以通过那个函数定义排序应该遵循的规则 。</p>
<p> 比如 ， 对字符串做不区分大小写的排序 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="s">&quot;This is a test string from Andrew&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">)</span>
<span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;Andrew&#39;</span><span class="p">,</span> <span class="s">&#39;from&#39;</span><span class="p">,</span> <span class="s">&#39;is&#39;</span><span class="p">,</span> <span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;This&#39;</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="c">#  对照 </span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="s">&quot;This is a test string from Andrew&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
<span class="p">[</span><span class="s">&#39;Andrew&#39;</span><span class="p">,</span> <span class="s">&#39;This&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;from&#39;</span><span class="p">,</span> <span class="s">&#39;is&#39;</span><span class="p">,</span> <span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;test&#39;</span><span class="p">]</span>
</pre></div>


<p><code>key</code>  参数的值必须是个函数 ， 该函数有一个参数 （ 列表元素 ） 并且返回一个用来排序的  key（ 按这个  key  进行排序 ）。</p>
<p> 一般通过使用对象的某个索引作为  key  的值来对复杂对象进行排序 。 比如对一个多维数组进行排序 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">student_tuples</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
<span class="p">]</span>
<span class="c">#  按列表元素 （ 元组 ） 的第 3 个值排序 </span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">student_tuples</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">student</span><span class="p">:</span> <span class="n">student</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>   <span class="c"># sort by age</span>
<span class="p">[(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)]</span>
</pre></div>


<p> 这个技术也可以用来按对象的属性值进行排序 。 比如 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">Student</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">grade</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">grade</span> <span class="o">=</span> <span class="n">grade</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">repr</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="p">))</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">student_objects</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Student</span><span class="p">(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
        <span class="n">Student</span><span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
        <span class="n">Student</span><span class="p">(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
<span class="p">]</span>
<span class="c">#  按  age  属性的值排序 </span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">student_objects</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">student</span><span class="p">:</span> <span class="n">student</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>   <span class="c"># sort by age</span>
<span class="p">[(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)]</span>
</pre></div>


<h2 id="operator">Operator  模块函数 </h2>
<p> 由于  key  参数比较常用 ， 所以  Python  内置了一些用来简单 、 快速生成相关函数的方法 。
<a href="http://docs.python.org/library/operator.html#module-operator">operator  模块 </a>  提供了  <a href="http://docs.python.org/2/library/operator.html#operator.itemgetter">itemgetter</a>，<a href="http://docs.python.org/2/library/operator.html#operator.attrgetter">attrgetter</a>，
 以及从  Python 2.6  开始提供的  <a href="http://docs.python.org/2/library/operator.html#operator.methodcaller">methodcaller</a>  函数 。</p>
<p> 使用这些函数 ， 上面的例子将变得更简单 、 更快速 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span><span class="p">,</span> <span class="n">attrgetter</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">student_tuples</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
<span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">student_tuples</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>  <span class="c">#  按元素索引排序 </span>
<span class="p">[(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">Student</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">grade</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">grade</span> <span class="o">=</span> <span class="n">grade</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">repr</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="p">))</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">student_objects</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Student</span><span class="p">(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
        <span class="n">Student</span><span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
        <span class="n">Student</span><span class="p">(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
<span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">student_objects</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s">&#39;age&#39;</span><span class="p">))</span>  <span class="c">#  按对象属性排序 </span>
<span class="p">[(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)]</span>
</pre></div>


<p> 通过  operator  模块提供的函数还可以实现多重排序的功能 。 比如 ， 先按  grade  排序再按  age  排序 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">student_tuples</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="p">[(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">)]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">student_objects</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s">&#39;grade&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">))</span>
<span class="p">[(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">)]</span>
</pre></div>


<p><a href="http://docs.python.org/2/library/operator.html#operator.methodcaller">methodcaller</a>
 函数可以让元素调用一个方法 ， 然后按方法的返回值进行排序 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;abase&#39;</span><span class="p">,</span> <span class="s">&#39;alfalfa&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">methodcaller</span><span class="p">(</span><span class="s">&#39;count&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">))</span>  <span class="c"># word.count(&#39;a&#39;)</span>
<span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;abase&#39;</span><span class="p">,</span> <span class="s">&#39;alfalfa&#39;</span><span class="p">]</span>

<span class="c">#  等价于 </span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">word</span><span class="p">:</span> <span class="n">word</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">))</span>
<span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;abase&#39;</span><span class="p">,</span> <span class="s">&#39;alfalfa&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>


<h2 id="_2"> 升序和降序 </h2>
<p><code>list.sort()</code>  和  <code>sorted()</code>  都接受一个布尔类型的  <code>reverse</code>  参数 。 这个参数用来标记是否使用降序排序 。 比如获取按  age  降序排序的  student  数据 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">student_tuples</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="p">[(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">student_objects</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s">&#39;age&#39;</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="p">[(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
</pre></div>


<h2 id="stability"> 平衡 （Stability） 排序和复杂排序 </h2>
<p> 从  Python 2.2  开始 ， 排序将保证能够  <a href="http://en.wikipedia.org/wiki/Sorting_algorithm#Stability">stable</a>。
 这意味着当多个记录拥有相同的  key  时 ， 它们的原始顺序将被保留 。</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="p">[(</span><span class="s">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
</pre></div>


<p> 这里有两条记录都包含  'blue'  并且原列表中  ('blue', 1)  排在  ('blue', 2)  之前 ， 排序后这个顺序依旧被保留 。</p>
<p> 这个非常有用的特性可以用来实现包含多重排序 （ 一会升序 ， 一会降序 ） 的复杂排序 。 比如 ， 目标是实现  student  数据先以  grade  降序排序再以  age  升序排序 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">Student</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">grade</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">grade</span> <span class="o">=</span> <span class="n">grade</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">repr</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="p">))</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">student_objects</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Student</span><span class="p">(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
        <span class="n">Student</span><span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
        <span class="n">Student</span><span class="p">(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
<span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">student_objects</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s">&#39;age&#39;</span><span class="p">))</span>     <span class="c"># sort on secondary key</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">[(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s">&#39;grade&#39;</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>       <span class="c"># now sort on primary key, descending</span>
<span class="p">[(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)]</span>
</pre></div>


<p>Python  使用的  <a href="http://en.wikipedia.org/wiki/Timsort">Timsort</a>  排序算法能够高效的实现多重排序 。</p>
<h2 id="decorate-sort-undecorate"> 以前的实现方式 (Decorate-Sort-Undecorate)</h2>
<p>Python 2.4  之前的惯用方法之一是使用  Decorate-Sort-Undecorate， 比如将  student  数据按  grade  排序 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">decorated</span> <span class="o">=</span> <span class="p">[(</span><span class="n">student</span><span class="o">.</span><span class="n">grade</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">student</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">student</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">student_objects</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">decorated</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">student</span> <span class="k">for</span> <span class="n">grade</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">decorated</span><span class="p">]</span>               <span class="c"># undecorate</span>
<span class="p">[(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
</pre></div>


<p> 这种方法的另一个名字是  <a href="http://en.wikipedia.org/wiki/Schwartzian_transform">Schwartzian transform</a>， 有兴趣的可以去了解一下 。</p>
<h2 id="cmp"> 以前的实现方式 ( 使用  cmp  参数 )</h2>
<p>Python 2.4  之前惯用的另一种方法是使用  cmp  参数 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">numeric_compare</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="nb">cmp</span><span class="o">=</span><span class="n">numeric_compare</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</pre></div>


<p> 倒序 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">reverse_numeric</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">y</span> <span class="o">-</span> <span class="n">x</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="nb">cmp</span><span class="o">=</span><span class="n">reverse_numeric</span><span class="p">)</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>


<p>Python 3  不再支持  cmp  参数 ， 那么如果转换之前的程序呢 ？ 可以使用下面的代码 ：</p>
<div class="codehilite"><pre><span class="k">def</span> <span class="nf">cmp_to_key</span><span class="p">(</span><span class="n">mycmp</span><span class="p">):</span>
    <span class="s">&#39;Convert a cmp= function into a key= function&#39;</span>
    <span class="k">class</span> <span class="nc">K</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="k">def</span> <span class="nf">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">mycmp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span>
        <span class="k">def</span> <span class="nf">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">mycmp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">mycmp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">def</span> <span class="nf">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">mycmp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span>
        <span class="k">def</span> <span class="nf">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">mycmp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span>
        <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">mycmp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">K</span>
</pre></div>


<p> 用法 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="n">cmp_to_key</span><span class="p">(</span><span class="n">reverse_numeric</span><span class="p">))</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>


<p> 在  Python 2.7  中 ，<code>cmp_to_key()</code>  工具已经被内置到  <a href="http://docs.python.org/2/library/functools.html#functools.cmp_to_key">functools</a>  模块中 。</p>
<h2 id="_3"> 其他 </h2>
<ul>
<li>
<p> 对于本地化排序 ， 可以使用  <a href="http://docs.python.org/2/library/locale.html#locale.strxfrm">locale.strxfrm()</a>  作为  key  函数或使用  <a href="http://docs.python.org/2/library/locale.html#locale.strcoll">locale.strcoll()</a>  作为比较函数 。</p>
</li>
<li>
<p><code>reverse</code>  参数依然能够保存排序的稳定性 （ 比如 ， 拥有相同记录的  keys  依旧保留了原来的顺序 ）， 有趣的是 ， 就算是不使用该参数也可以通过使用两次  <code>reversed</code>  函数来实现这种效果 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">assert</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">data</span><span class="p">))))</span>
</pre></div>


</li>
<li>
<p> 如果想给类排序的话 ， 只需添加相关的比较方法 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">Student</span><span class="o">.</span><span class="n">__eq__</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">age</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Student</span><span class="o">.</span><span class="n">__ne__</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">age</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Student</span><span class="o">.</span><span class="n">__lt__</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">age</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Student</span><span class="o">.</span><span class="n">__le__</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">age</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Student</span><span class="o">.</span><span class="n">__gt__</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">age</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Student</span><span class="o">.</span><span class="n">__ge__</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">age</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">student_objects</span><span class="p">)</span>
<span class="p">[(</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)]</span>
</pre></div>


<p> 一般情况下 ， 只需定义上面 6 个比较操作就可以了 。<a href="http://docs.python.org/2/library/functools.html#functools.total_ordering">functools.total_ordering</a>  类装饰器可以很方便就实现这个需求 。</p>
</li>
<li>
<p>key  函数也可以不访问要排序对象的相关数据 ， 访问外部资源也是可以的 。 比如 ， 学生成绩存储在一个字典中 ， 这个字典可以用来对学生名字进行排序 ：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">students</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;jane&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">newgrades</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;john&#39;</span><span class="p">:</span> <span class="s">&#39;F&#39;</span><span class="p">,</span> <span class="s">&#39;jane&#39;</span><span class="p">:</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;dave&#39;</span><span class="p">:</span> <span class="s">&#39;C&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">students</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">newgrades</span><span class="o">.</span><span class="n">__getitem__</span><span class="p">)</span>
<span class="p">[</span><span class="s">&#39;jane&#39;</span><span class="p">,</span> <span class="s">&#39;dave&#39;</span><span class="p">,</span> <span class="s">&#39;john&#39;</span><span class="p">]</span>
</pre></div>


</li>
</ul>
<!--##  参考 -->

<!--* [TimSort  中的核心过程  - YD Blog - ITeye 技术网站 ](http://yangdong.iteye.com/blog/1170214)--></div>
    <footer>
      <p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">mozillazg</span>
  </span>
  <time datetime="2013-03-03T00:00:00" pubdate>周日 03 三月 2013</time>    <span class="categories">
        <a class="category" href="http://mozillazg.com/tag/python.html">python</a>
        <a class="category" href="http://mozillazg.com/tag/sorting.html">sorting</a>
        <a class="category" href="http://mozillazg.com/tag/sort.html">sort</a>
        <a class="category" href="http://mozillazg.com/tag/sorted.html">sorted</a>
      </span>
  </p>      <div class="sharing">
      </div>    </footer>
  </article>

    <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
  </div>
      <aside class="sidebar">
    <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
            <li class="post">
          <a href="http://mozillazg.com/2014/08/dont-step-on-my-coat.zh-cn.html">[译][漫]Cyanide & Happiness 14082101</a>
      </li>
            <li class="post">
          <a href="http://mozillazg.com/2014/08/2270.iloveyou.zh-cn.html">[译][漫]Cyanide & Happiness #2270</a>
      </li>
            <li class="post">
          <a href="http://mozillazg.com/2014/08/3239.look.zh-cn.html">[译][漫]Cyanide & Happiness #3239</a>
      </li>
            <li class="post">
          <a href="http://mozillazg.com/2014/08/3221.machine.zh-cn.html">[译][漫]Cyanide & Happiness #3221</a>
      </li>
            <li class="post">
          <a href="http://mozillazg.com/2014/08/3654.go-long.zh-cn.html">[译][漫]Cyanide & Happiness #3654</a>
      </li>
          </ul>
  </section>
    <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
              <li><a href="http://mozillazg.com/category/comics.html">comics</a></li>
              <li><a href="http://mozillazg.com/category/database.html">database</a></li>
              <li><a href="http://mozillazg.com/category/django.html">django</a></li>
              <li><a href="http://mozillazg.com/category/english.html">english</a></li>
              <li><a href="http://mozillazg.com/category/firefox.html">firefox</a></li>
              <li><a href="http://mozillazg.com/category/git.html">git</a></li>
              <li><a href="http://mozillazg.com/category/linux.html">linux</a></li>
              <li><a href="http://mozillazg.com/category/others.html">others</a></li>
              <li><a href="http://mozillazg.com/category/python.html">python</a></li>
              <li><a href="http://mozillazg.com/category/web.html">web</a></li>
              <li><a href="http://mozillazg.com/category/wondows.html">wondows</a></li>
          </ul>
  </section>
   

  <section>
  <h1>Tags</h1>
      <a href="http://mozillazg.com/tag/zope2.html">zope2</a>,      <a href="http://mozillazg.com/tag/pelican.html">pelican</a>,      <a href="http://mozillazg.com/tag/python-markdown.html">python-markdown</a>,      <a href="http://mozillazg.com/tag/useradmin.html">UserAdmin</a>,      <a href="http://mozillazg.com/tag/vsftp.html">vsftp</a>,      <a href="http://mozillazg.com/tag/unicode.html">unicode</a>,      <a href="http://mozillazg.com/tag/mysql.html">mysql</a>,      <a href="http://mozillazg.com/tag/web.html">web</a>,      <a href="http://mozillazg.com/tag/generator.html">generator</a>,      <a href="http://mozillazg.com/tag/datetime.html">datetime</a>,      <a href="http://mozillazg.com/tag/terminal.html">terminal</a>,      <a href="http://mozillazg.com/tag/cygwin.html">Cygwin</a>,      <a href="http://mozillazg.com/tag/sqldeveloper.html">sqldeveloper</a>,      <a href="http://mozillazg.com/tag/iptables.html">iptables</a>,      <a href="http://mozillazg.com/tag/bigintegerfield.html">BigIntegerField</a>,      <a href="http://mozillazg.com/tag/python.html">python</a>,      <a href="http://mozillazg.com/tag/replication.html">replication</a>,      <a href="http://mozillazg.com/tag/ssh.html">ssh</a>,      <a href="http://mozillazg.com/tag/fab.html">fab</a>,      <a href="http://mozillazg.com/tag/sorted.html">sorted</a>,      <a href="http://mozillazg.com/tag/send_mail.html">send_mail</a>,      <a href="http://mozillazg.com/tag/decorator.html">decorator</a>,      <a href="http://mozillazg.com/tag/sorting.html">sorting</a>,      <a href="http://mozillazg.com/tag/list_display.html">list_display</a>,      <a href="http://mozillazg.com/tag/list.html">list</a>,      <a href="http://mozillazg.com/tag/mod_wsgi.html">mod_wsgi</a>,      <a href="http://mozillazg.com/tag/merge.html">merge</a>,      <a href="http://mozillazg.com/tag/multiprocessing.html">multiprocessing</a>,      <a href="http://mozillazg.com/tag/postpresql.html">postpresql</a>,      <a href="http://mozillazg.com/tag/centos.html">centos</a>,      <a href="http://mozillazg.com/tag/yi-hua.html">汉化</a>,      <a href="http://mozillazg.com/tag/libxslt.html">libxslt</a>,      <a href="http://mozillazg.com/tag/auto-increment.html">auto-increment</a>,      <a href="http://mozillazg.com/tag/dateutil.html">dateutil</a>,      <a href="http://mozillazg.com/tag/querydict.html">querydict</a>,      <a href="http://mozillazg.com/tag/threading.html">threading</a>,      <a href="http://mozillazg.com/tag/foreign-key.html">foreign-key</a>,      <a href="http://mozillazg.com/tag/memcached.html">memcached</a>,      <a href="http://mozillazg.com/tag/email.html">email</a>,      <a href="http://mozillazg.com/tag/gunicorn.html">gunicorn</a>,      <a href="http://mozillazg.com/tag/sendmail.html">sendmail</a>,      <a href="http://mozillazg.com/tag/screen.html">screen</a>,      <a href="http://mozillazg.com/tag/javascript.html">javascript</a>,      <a href="http://mozillazg.com/tag/ubuntu.html">ubuntu</a>,      <a href="http://mozillazg.com/tag/apache.html">apache</a>,      <a href="http://mozillazg.com/tag/bash.html">bash</a>,      <a href="http://mozillazg.com/tag/socket.html">socket</a>,      <a href="http://mozillazg.com/tag/thread.html">thread</a>,      <a href="http://mozillazg.com/tag/admin.html">admin</a>,      <a href="http://mozillazg.com/tag/man-hua.html">漫画</a>,      <a href="http://mozillazg.com/tag/pillow.html">pillow</a>,      <a href="http://mozillazg.com/tag/south.html">south</a>,      <a href="http://mozillazg.com/tag/phpmyadmin.html">phpmyadmin</a>,      <a href="http://mozillazg.com/tag/markdown.html">markdown</a>,      <a href="http://mozillazg.com/tag/firefox.html">firefox</a>,      <a href="http://mozillazg.com/tag/color.html">color</a>,      <a href="http://mozillazg.com/tag/pdfjs.html">pdf.js</a>,      <a href="http://mozillazg.com/tag/search_fields.html">search_fields</a>,      <a href="http://mozillazg.com/tag/pygments.html">pygments</a>,      <a href="http://mozillazg.com/tag/explosmnet.html">Explosm.net</a>,      <a href="http://mozillazg.com/tag/linux.html">linux</a>,      <a href="http://mozillazg.com/tag/gateway.html">gateway</a>,      <a href="http://mozillazg.com/tag/cyanide-and-happiness.html">Cyanide and Happiness</a>,      <a href="http://mozillazg.com/tag/git.html">git</a>,      <a href="http://mozillazg.com/tag/zhong-wen-fan-yi.html">中文翻译</a>,      <a href="http://mozillazg.com/tag/fabric.html">fabric</a>,      <a href="http://mozillazg.com/tag/rpmforge.html">rpmforge</a>,      <a href="http://mozillazg.com/tag/redmine.html">redmine</a>,      <a href="http://mozillazg.com/tag/nginx.html">nginx</a>,      <a href="http://mozillazg.com/tag/fastcgi.html">fastcgi</a>,      <a href="http://mozillazg.com/tag/sort.html">sort</a>,      <a href="http://mozillazg.com/tag/shell.html">shell</a>,      <a href="http://mozillazg.com/tag/form.html">form</a>,      <a href="http://mozillazg.com/tag/zhuang-shi-qi.html">装饰器</a>,      <a href="http://mozillazg.com/tag/python-dateutil.html">python-dateutil</a>,      <a href="http://mozillazg.com/tag/psql.html">psql</a>,      <a href="http://mozillazg.com/tag/comics.html">comics</a>,      <a href="http://mozillazg.com/tag/verbose_name_plural.html">verbose_name_plural</a>,      <a href="http://mozillazg.com/tag/ying-yu.html">英语</a>,      <a href="http://mozillazg.com/tag/mongodbshu-ju-ku.html">MongoDB，数据库</a>,      <a href="http://mozillazg.com/tag/pil.html">pil</a>,      <a href="http://mozillazg.com/tag/tiao-ban-ji.html">跳板机</a>,      <a href="http://mozillazg.com/tag/queryset.html">queryset</a>,      <a href="http://mozillazg.com/tag/libxml.html">libxml</a>,      <a href="http://mozillazg.com/tag/lxml.html">lxml</a>,      <a href="http://mozillazg.com/tag/vps.html">vps</a>,      <a href="http://mozillazg.com/tag/flotr2.html">flotr2</a>,      <a href="http://mozillazg.com/tag/zope.html">zope</a>,      <a href="http://mozillazg.com/tag/csv.html">csv</a>,      <a href="http://mozillazg.com/tag/verbose_name.html">verbose_name</a>,      <a href="http://mozillazg.com/tag/valueerror.html">ValueError</a>,      <a href="http://mozillazg.com/tag/ansi.html">ansi</a>,      <a href="http://mozillazg.com/tag/argparse.html">argparse</a>,      <a href="http://mozillazg.com/tag/x-priority.html">X-Priority</a>,      <a href="http://mozillazg.com/tag/windows.html">windows</a>,      <a href="http://mozillazg.com/tag/django.html">django</a>,      <a href="http://mozillazg.com/tag/english.html">english</a>,      <a href="http://mozillazg.com/tag/python-third-party-model.html">python-third-party-model</a>    </section>

    
    <section>
        <h1>Social</h1>
        <ul>
                            <li><a href="http://mozillazg.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">Atom</a></li>
                            <li><a href="http://www.douban.com/people/mozillazg/" target="_blank">豆瓣</a></li>
                    <li><a href="https://github.com/mozillazg" target="_blank">Fork me on GitHub</a></li>
                    <li><a href="http://about.me/mozillazg" target="_blank">About Me</a></li>
                </ul>
    </section>
      <section>
        <h1>Blogroll</h1>
        <ul>
                    <li><a href="http://docs.notmyidea.org/alexis/pelican/" target="_blank">Pelican</a></li>
                    <li><a href="http://python.org" target="_blank">Python.org</a></li>
                    <li><a href="http://jinja.pocoo.org" target="_blank">Jinja2</a></li>
                </ul>
    </section>
  
  </aside>    </div>
  </div>
  <footer role="contentinfo"><p>
                  Copyright &copy;  2013-2014  - mozillazg -
    <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  	<script type="text/javascript">
	  var disqus_shortname = 'my-github-blog';
                var disqus_identifier = '/2013/03/python-sorting-how-to.html';
          var disqus_url = 'http://mozillazg.com/2013/03/python-sorting-how-to.html';
          var disqus_title = '[python]排序（Sorting Mini-HOW TO）';
      	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
</body>
</html>