{"version":3,"file":"vdonate.min.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import './index.less'\n\nconst defaults = {\n  title: '如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作!',\n  btnText: '打赏支持'\n};\n\nconst bd = document.body;\n\nlet isShow = false;\n\nexport default class Donate {\n  constructor(options) {\n    if (arguments[0] && typeof arguments[0] === \"object\") {\n      this.options = Object.assign({}, defaults, options);\n    }\n\n    if (!this.options.wechatImage) {\n      throw new Error('wechatImage is required');\n    }\n\n    if (!this.options.alipayImage) {\n      throw new Error('alipayImage is required');\n    }\n\n    this.el = this.options.el && this.options.el;\n    this.render();\n    this.bind();\n  }\n\n  render() {\n    var modalTpl = `\n      <div class=\"donate-modal-background\">\n        <div class=\"donate-modal\">\n          <p class=\"donate-quote\">\n            <i class=\"donate-quote-left\"></i>\n            <span class=\"donate-quote-word\">${this.options.title}</span>\n            <i class=\"donate-quote-right\"></i>\n          </p>\n          <div class=\"donate-tab\">\n            <a href=\"javascript:;\" class=\"donate-wechat active\" data-index=\"0\">微信</a>\n            <a href=\"javascript:;\" class=\"donate-alipay\" data-index=\"1\">支付宝</a>\n            <img src=\"${this.options.wechatImage}\" alt=\"wechat\" class=\"donate-image active\">\n            <img src=\"${this.options.alipayImage}\" alt=\"alipay\" class=\"donate-image\">\n          </div>\n        </div>\n      </div>\n    `\n\n    var btnTpl = `\n      <a href=\"javascript:;\" class=\"donate-btn\"><i class=\"donate-qrcode\"></i>${this.options.btnText}</a>\n    `\n\n    if (this.el) this.el.innerHTML = btnTpl;\n    this.modal = document.createElement('div');\n    this.modal.innerHTML = modalTpl;\n    this.modal.id = 'donate-modal-container';\n    bd.appendChild(this.modal);\n  }\n\n  bind() {\n    var self = this;\n    this.btns = this.modal.querySelectorAll('.donate-tab a');\n    this.images = this.modal.querySelectorAll('.donate-tab .donate-image');\n\n    this.modal.addEventListener('click', this._modalEvent.bind(self), false);\n\n    if (!this.el) {\n      return;\n    }\n\n    this.el.addEventListener('click', this._donateBtnEvent.bind(self), false);\n  }\n\n  _modalEvent(e) {\n    e.stopPropagation();\n    var index = e.target.dataset.index;\n    if (index) {\n      [].slice.call(this.btns).forEach((btn) => {\n        btn.classList.toggle('active');\n      });\n      [].slice.call(this.images).forEach((image) => {\n        image.classList.toggle('active');\n      });\n      return;\n    }\n\n    this.hide();\n  }\n\n  _donateBtnEvent(e) {\n    if (e.target.className === 'donate-btn') {\n      this.show();\n    }\n  }\n\n  show() {\n    if (isShow) return;\n    this.modal.classList.add('active');\n    isShow = true;\n  }\n\n  hide() {\n    this.modal.classList.remove('active');\n    isShow = false;\n  }\n\n  destroy() {\n    var self = this;\n    this.modal.removeEventListener('click', this._modalEvent.bind(self), false);\n    this.el.removeEventListener('click', this._donateBtnEvent.bind(self), false);\n    bd.removeChild(this.modal);\n  }\n\n}"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","bd","body","isShow","options","arguments","_typeof","Object","assign","defaults","this","wechatImage","Error","alipayImage","el","render","bind","modalTpl","title","btnTpl","btnText","innerHTML","modal","id","btns","querySelectorAll","images","addEventListener","_modalEvent","_donateBtnEvent","e","stopPropagation","target","dataset","index","slice","call","forEach","btn","classList","toggle","image","hide","className","show","add","remove","removeEventListener","removeChild"],"mappings":"+jBAAA,SAAqBA,EAAKC,QACX,IAARA,IAAiBA,MACtB,IAAIC,EAAWD,EAAIC,SAEnB,GAAKF,GAA2B,oBAAbG,SAAnB,CAEA,IAAIC,EAAOD,SAASC,MAAQD,SAASE,qBAAqB,QAAQ,GAC9DC,EAAQH,SAASI,cAAc,SACnCD,EAAME,KAAO,WAEI,QAAbN,GACEE,EAAKK,WACPL,EAAKM,aAAaJ,EAAOF,EAAKK,YAKhCL,EAAKO,YAAYL,GAGfA,EAAMM,WACRN,EAAMM,WAAWC,QAAUb,EAE3BM,EAAMK,YAAYR,SAASW,eAAed,skHCpBrC,2CACE,QAGLe,EAAKZ,SAASa,KAEhBC,GAAS,+BAGCC,2GACNC,UAAU,IAA8B,WAAxBC,EAAOD,UAAU,WAC9BD,QAAUG,OAAOC,UAAWC,EAAUL,KAGxCM,KAAKN,QAAQO,kBACV,IAAIC,MAAM,+BAGbF,KAAKN,QAAQS,kBACV,IAAID,MAAM,gCAGbE,GAAKJ,KAAKN,QAAQU,IAAMJ,KAAKN,QAAQU,QACrCC,cACAC,mEAIDC,8NAKsCP,KAAKN,QAAQc,4TAMnCR,KAAKN,QAAQO,0FACbD,KAAKN,QAAQS,0GAM7BM,2FACuET,KAAKN,QAAQgB,sBAGpFV,KAAKI,KAAIJ,KAAKI,GAAGO,UAAYF,QAC5BG,MAAQjC,SAASI,cAAc,YAC/B6B,MAAMD,UAAYJ,OAClBK,MAAMC,GAAK,2BACb1B,YAAYa,KAAKY,2CAKfE,KAAOd,KAAKY,MAAMG,iBAAiB,sBACnCC,OAAShB,KAAKY,MAAMG,iBAAiB,kCAErCH,MAAMK,iBAAiB,QAASjB,KAAKkB,YAAYZ,KAJ3CN,OAIuD,GAE7DA,KAAKI,SAILA,GAAGa,iBAAiB,QAASjB,KAAKmB,gBAAgBb,KAV5CN,OAUwD,uCAGzDoB,QACRC,kBACUD,EAAEE,OAAOC,QAAQC,eAExBC,MAAMC,KAAK1B,KAAKc,MAAMa,QAAQ,SAACC,KAC5BC,UAAUC,OAAO,mBAEpBL,MAAMC,KAAK1B,KAAKgB,QAAQW,QAAQ,SAACI,KAC5BF,UAAUC,OAAO,iBAKtBE,+CAGSZ,GACa,eAAvBA,EAAEE,OAAOW,gBACNC,sCAKHzC,SACCmB,MAAMiB,UAAUM,IAAI,aAChB,uCAIJvB,MAAMiB,UAAUO,OAAO,aACnB,yCAKJxB,MAAMyB,oBAAoB,QAASrC,KAAKkB,YAAYZ,KAD9CN,OAC0D,QAChEI,GAAGiC,oBAAoB,QAASrC,KAAKmB,gBAAgBb,KAF/CN,OAE2D,KACnEsC,YAAYtC,KAAKY"}