<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>mozillazg's Blog</title><link href="https://mozillazg.com/" rel="alternate"></link><link href="https://mozillazg.com/feeds/rust.atom.xml" rel="self"></link><id>https://mozillazg.com/</id><updated>2017-10-06T00:00:00+00:00</updated><entry><title>Rust: Cargo ä½¿ç”¨æœ¬åœ°çš„ crateï¼ˆæœ¬åœ°åŒ…ä»£ç ï¼‰</title><link href="https://mozillazg.com/2017/10/rust-cargo-use-local-crate-package.html" rel="alternate"></link><published>2017-10-06T00:00:00+00:00</published><updated>2017-10-06T00:00:00+00:00</updated><author><name>mozillazg</name></author><id>tag:mozillazg.com,2017-10-06:2017/10/rust-cargo-use-local-crate-package.html</id><summary type="html">&lt;p&gt;é»˜è®¤åœ¨ Cargo.toml ä¸­æŒ‡å®šäº†åŒ…ä»¥åï¼ŒCargo build çš„æ—¶å€™ä¼šä» crates.io ä¸Šä¸‹è½½è¿œç¨‹
çš„å¯¹åº”åŒ…ä»£ç ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨ Cargo.toml ä¸­æŒ‡å®šä½¿ç”¨æœ¬åœ°æœºå™¨ä¸ŠæŸä¸ªç›®å½•ä¸‹çš„åŒ…ï¼Œ
æ–¹ä¾¿è°ƒè¯•æœ¬åœ°å¼€å‘çš„åŒ…æˆ–è€…åœ¨æ²¡ç½‘çš„ç¯å¢ƒä¸‹å¼€å‘å’Œè°ƒè¯•ã€‚&lt;/p&gt;
&lt;div class="section" id="section-1"&gt;
&lt;h2 id="hidsection-1"&gt;å¾…è°ƒç”¨çš„æœ¬åœ°åŒ…&lt;a class="headerlink" href="#hidsection-1" title="Permalink to this headline"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬è¦ä½¿ç”¨çš„åŒ…æ˜¯ hello, é€šè¿‡ &lt;tt class="docutils literal"&gt;cargo new hello&lt;/tt&gt; åˆ›å»ºï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$ &lt;/span&gt;cargo&lt;span class="w"&gt; &lt;/span&gt;new&lt;span class="w"&gt; &lt;/span&gt;hello
&lt;span class="go"&gt; Created library `hello` project&lt;/span&gt;

&lt;span class="gp"&gt;$ &lt;/span&gt;tree&lt;span class="w"&gt; &lt;/span&gt;hello
&lt;span class="go"&gt;hello&lt;/span&gt;
&lt;span class="go"&gt;â”œâ”€â”€ Cargo.toml&lt;/span&gt;
&lt;span class="go"&gt;â””â”€â”€ src&lt;/span&gt;
&lt;span class="go"&gt;    â””â”€â”€ lib.rs&lt;/span&gt;

&lt;span class="go"&gt;1 directory, 2 files&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬ç»™è¿™ä¸ªåŒ…åŠ ä¸€ä¸ª &lt;tt class="docutils literal"&gt;hi&lt;/tt&gt; å‡½æ•°:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// cat hello/src/lib.rs&lt;/span&gt;
&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;hi&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="kt"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="fm"&gt;println!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hi {}!&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬è¦åœ¨åˆ«çš„åœ°æ–¹ä½¿ç”¨ &lt;tt class="docutils literal"&gt;hello&lt;/tt&gt; è¿™ä¸ªåŒ…ï¼Œæ¯”å¦‚è°ƒç”¨ &lt;tt class="docutils literal"&gt;hello.hi&lt;/tt&gt; å‡½æ•°ï¼Œè¯¥å¦‚ä½•è®¾ç½®å‘¢ï¼Ÿ&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="section-2"&gt;
&lt;h2 id="hidsection-2"&gt;é…ç½®ä½¿ç”¨æœ¬åœ°åŒ…&lt;a class="headerlink" href="#hidsection-2" title="Permalink to this headline"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬åœ¨ hello çš„åŒçº§ç›®å½•æœ‰ä¸€ä¸ª &lt;tt class="docutils literal"&gt;demo&lt;/tt&gt; é¡¹ç›®ï¼Œè¿™ä¸ªé¡¹ç›®å°†ä½¿ç”¨ &lt;tt class="docutils literal"&gt;hello&lt;/tt&gt; åŒ…é‡Œçš„å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆåˆ›å»ºè¿™ä¸ª &lt;tt class="docutils literal"&gt;demo&lt;/tt&gt; é¡¹ç›®:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ cargo new demo --bin
 Created binary (application) `demo` project
&lt;/pre&gt;
&lt;p&gt;ç„¶ååœ¨é¡¹ç›®ä¸­å¢åŠ è°ƒç”¨ä»£ç :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// cat demo/src/main.rs&lt;/span&gt;
&lt;span class="k"&gt;extern&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;crate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hello&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;hello&lt;/span&gt;::&lt;span class="n"&gt;hi&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;mozillazg&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æœ€åå…³é”®çš„ä¸€æ­¥å°±æ˜¯é…ç½® Cargo.toml ä½¿ç”¨æœ¬åœ°çš„ &lt;tt class="docutils literal"&gt;hello&lt;/tt&gt; åŒ…ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆæ¥çœ‹ä¸€ä¸‹å½“å‰çš„ç›®å½•ç»“æ„:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$ tree .
.
â”œâ”€â”€ demo
â”‚&amp;nbsp;&amp;nbsp; â”œâ”€â”€ Cargo.toml
â”‚&amp;nbsp;&amp;nbsp; â””â”€â”€ src
â”‚&amp;nbsp;&amp;nbsp;     â””â”€â”€ main.rs
â””â”€â”€ hello
    â”œâ”€â”€ Cargo.toml
    â””â”€â”€ src
        â””â”€â”€ lib.rs

4 directories, 4 files
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºæ¥ï¼Œ &lt;tt class="docutils literal"&gt;hello&lt;/tt&gt; &lt;strong&gt;ç›¸å¯¹äº&lt;/strong&gt; &lt;tt class="docutils literal"&gt;demo/Cargo.toml&lt;/tt&gt; çš„ç›®å½•ä½ç½®æ˜¯ &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;../hello&lt;/span&gt;&lt;/tt&gt; ã€‚
ç„¶åæˆ‘ä»¬é…ç½®ä¸€ä¸‹ &lt;tt class="docutils literal"&gt;demo/Cargo.toml&lt;/tt&gt; æŒ‡å®šä½¿ç”¨è¿™ä¸ªç›®å½•ä¸‹çš„ &lt;tt class="docutils literal"&gt;hello&lt;/tt&gt; åŒ…:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[dependencies]
hello = { path = &amp;quot;../hello&amp;quot; }
&lt;/pre&gt;
&lt;p&gt;åœ¨ &lt;tt class="docutils literal"&gt;demo&lt;/tt&gt; é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ &lt;tt class="docutils literal"&gt;cargo run&lt;/tt&gt; çœ‹çœ‹æ•ˆæœ:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
# ~/demo
$ cargo run
   Compiling hello v0.1.0 (file:///Users/mozillazg/hello)
   Compiling demo v0.1.0 (file:///Users/mozillazg/demo)
    Finished dev [unoptimized + debuginfo] target(s) in 0.47 secs
     Running `target/debug/demo`
hi mozillazg!
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ° &lt;tt class="docutils literal"&gt;demo&lt;/tt&gt; ç¡®å®ä½¿ç”¨äº†æœ¬åœ°çš„ &lt;tt class="docutils literal"&gt;hello&lt;/tt&gt; åŒ…çš„ä»£ç ã€‚ğŸ‘&lt;/p&gt;
&lt;p&gt;P.S. ä¸Šé¢çš„:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[dependencies]
hello = { path = &amp;quot;../hello&amp;quot; }
&lt;/pre&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥æ”¹ä¸º:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
[dependencies.hello]
path = &amp;quot;../hello&amp;quot;
&lt;/pre&gt;
&lt;p&gt;ğŸ˜&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="section-3"&gt;
&lt;h2 id="hidsection-3"&gt;å‚è€ƒèµ„æ–™&lt;a class="headerlink" href="#hidsection-3" title="Permalink to this headline"&gt;Â¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://github.com/rust-lang/cargo/issues/640"&gt;Documentation should include exemples of depending on local modules Â· Issue #640 Â· rust-lang/cargo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://doc.crates.io/specifying-dependencies.html#specifying-path-dependencies"&gt;Specifying Dependencies&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</summary><category term="crate"></category><category term="cargo"></category></entry></feed>