<!DOCTYPE html>
<html lang="zh"  prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml" class="han-init">
<head>
    <title>Go: traceback 中包含的信息 - mozillazg's Blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- share.css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css">


    <link href="https://mozillazg.com/favicon.ico" rel="icon">

<link rel="canonical" href="https://mozillazg.com/2019/05/go-read-and-understand-info-from-stack-trace-traceback.html">

        <meta name="author" content="mozillazg" />
        <meta name="keywords" content="go,debug" />
    <meta name="description" content="约定 示例使用的 Go 版本： go version go1.12.3 darwin/amd64 。 因为默认 go build 命令会在编译时进行一些优化导致举简单的示例程序的输出不符合举例的要求，所以除特殊说明外，所有示例程序都使用 go build -gcflags=all=&#34;-N -l&#34; &lt;name&gt;.go 的方式进行编译。 基本结构 1 2 3 4 5 6 7 8 package main import &#34;fmt&#34; func main() { fmt.Println(&#34;hello&#34;) panic(&#34;error&#34;) } 运行结果: $ ./hello hello panic: error goroutine 1 [running]: main.main() /Users/xxx/hello.go:7 +0x9f 从这个最基础的 stack trace 信息中可以看到是 /Users/xxx/hello.go 这个文件的第 7 行出错了，并且这个错误发生在 main package 的 main 这个函数中。 方法 上面是在函数中 panic 了，下面看一下方法中 panic 的 strace 信息。 非指针实例的方法： 1 2 3 4 5 6 7 8 9 10 11 12 package main type User struct{} func main() { var u User u.Name() } func (u User) Name() int { panic(&#34;error&#34;) } 运行结果: $ ./method panic: error goroutine 1 [running]: main.User.Name(0x0) /Users/xxx/method.go:11 +0x42 main.main() /Users/xxx/method.go:7 +0x22 上方的 main.User.Name(0x0) 中的 0x0 表示的是方法的返回值，这里是 0 。 指针实例的方法： 1 2 3 4 5 6 7 8 9 10 11 12 13 $ cat method.go package main type User struct{} func main() { var u User u.Name() } func (u *User) Name() int { panic(&#34;error&#34;) } 运行结果: $ ./method panic: error goroutine 1 [running]: main.(*User).Name(0xc000044788, 0x0) /Users/xxx/method.go:11 +0x42 main.main() /Users/xxx/method.go:7 +0x2b 上方的 main.(*User).Name(0xc000044788, 0x0) 中 0xc000044788 表示的是 u 的指针地址( &amp;u )。 0x0 表示的是方法的返回值，这里是 0 。 参数 下面举例说明一下函数或方法的参数在 trace 中是如何展示的。 int/float/bool/array int/float/bool/array 这些基本数据类型就是按本来的只显示的： 1 2 3 4 5 6 7 8 9 package main func main() { test(true, 2, 2.2, [3]int{1, 2, 3}) } func test(b bool, n int, f float32, arr [3]int) { panic(&#34;test&#34;) } 结果: $ ./base panic: test goroutine 1 [running]: main.test(0xc000044701, 0x2, 0x400ccccd, 0x1, 0x2, 0x3) /Users/xxx/base.go:8 +0x39 main.main() /Users/xxx/base.go:4 +0x55 结果解析: main.test( 0xc000044701, // 一个常量，表示 true, false 是 0xc000044700 （至少在我的机器上是两个值） 0x2, // 2 0x400ccccd, // 2.2 的 16 进制表示 0x1, 0x2, 0x3 // [3]int{1, 2, 3} ) string 1 2 3 4 5 6 7 8 9 package main func main() { test(&#34;test&#34;) } func test(s string) { panic(&#34;string&#34;) } 结果: $ ./string panic: string goroutine 1 [running]: main.test(0x1074265, 0x4) /Users/mg/tmp/test_go/strace/string.go:8 +0x39 main.main() /Users/mg/tmp/test_go/strace/string.go:4 +0x36 为啥这里 main.test(0x1074265, 0x4) 显示的是两个参数呢，因为字符串是用两个参数来表示的: 第一个参数是指向字符串底层数组的指针地址(0x1074265)，第二个参数是字符串的长度(0x4 表示长度为 4 )。 slice slice 的数据用三个参数来表示：第一个是指向底层数组的指针，第二个是长度，第三个是容量: goroutine 1 [running]: main.test(0xc000044758, 0x3, 0x3) /Users/xxx/slice.go:8 +0x39 main.main() /Users/xxx/slice.go:4 +0x8c map map 的话就是一个指针地址表示: goroutine 1 [running]: main.test(0xc000044648) /Users/xxx/map.go:10 +0x39 main.main() /Users/xxx/map.go:4 +0x139 struct 会显示 struct 中所有字段的值: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 package main func main() { u := User{ name: &#34;Tom&#34;, age: 233, } test(u) } type User struct { name string age int } func test(u User) { panic(&#34;test&#34;) } 结果: $ ./struct panic: test goroutine 1 [running]: main.test(0x1074474, 0x3, 0xe9) /Users/xxx/struct.go:17 +0x39 main.main() /Users/xxx/struct.go:8 +0x67 解析: main.test( 0x1074474, 0x3, // name 字段的值 &#34;Tom&#34;，0x1074474: 底层数组，0x3: 字符串长度 0xe9 // age 字段的值 233 的 16 进制表示 ) point 指针类型的话就显示一个指针地址: $ ./point panic: test goroutine 1 [running]: main.test(0xc000044770) /Users/xxx/point.go:17 +0x39 main.main() /Users/xxx/point.go:8 +0x5a interface interface 由两个参数表示，第一个是指向 interface 中存储类型信息的指针，第二个是指向真实数据的指针: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 package main type namer interface { Name() string } func main() { var u namer = &amp;User{ name: &#34;Tom&#34;, age: 233, } test(u) } type User struct { name string age int } func (u *User) Name() string { return u.name } func test(n namer) { panic(&#34;test&#34;) } 结果: $ ./interface panic: test goroutine 1 [running]: main.test(0x107c5c0, 0xc000044770) /Users/xxx/interface.go:25 +0x39 main.main() /Users/xxx/interface.go:12 +0x8c // 0x107c5c0 包含类型信息的指针地址 // 0xc000044770 实际数据的指针地址 多个参数用一个值表示 当多个连续的参数可以用一个值表示的时候，trace 中就会用一个值来表示多个参数的值，比如 1 2 3 4 5 6 7 8 9 package main func main() { test(1, 2, 3, 20, 30, 60) } func test(a, b, c, d, e, f uint8) { panic(&#34;test&#34;) } 结果: $ ./pack panic: test goroutine 1 [running]: main.test(0x3c1e14030201) /Users/mg/tmp/test_go/strace/pack.go:8 +0x39 main.main() /Users/mg/tmp/test_go/strace/pack.go:4 +0x30 0x3c1e14030201 是由下面6个值组成的: Bits Binary Hex Value 00-07 0000 0001 01 1 08-15 0000 0002 02 2 16-23 0000 0003 03 3 24-31 0001 0100 14 20 32-39 0001 1110 1e 30 40-47 0011 1100 3c 60 P.S. 等将来找到对应的源码后再补充更详细的合并规则 :joy traceback 中显示的值个数 最多只能显示 10 个值 ，超过 10 个时会用 ... 代替: 1 2 3 4 5 6 7 8 9 package main func main() { test([13]int{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13}) } func test(arr [13]int) { panic(&#34;test&#34;) } $ ./max panic: test goroutine 1 [running]: main.test(0x1, 0x2, 0x3, 0x4, 0x5, 0x6, 0x7, 0x8, 0x9, 0xa, ...) /Users/xxx/max.go:8 +0x39 main.main() /Users/xxx/max.go:4 +0x4c 参考资料 research!rsc: Go Data Structures research!rsc: Go Data Structures: Interfaces Understanding Go panic output – joe shaw Stack Traces In Go" />

    <style>
      .js-toc {
        margin-bottom: 20px;
      }
      .donate-modal {
        text-align: center;
      }
      #donate-modal-container .donate-image {
        max-height: 300px !important;
        min-height: inherit !important;
      }
    </style>

        <meta property="og:site_name" content="mozillazg's Blog" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Go: traceback 中包含的信息"/>
        <meta property="og:url" content="https://mozillazg.com/2019/05/go-read-and-understand-info-from-stack-trace-traceback.html"/>
        <meta property="og:description" content="约定 示例使用的 Go 版本： go version go1.12.3 darwin/amd64 。 因为默认 go build 命令会在编译时进行一些优化导致举简单的示例程序的输出不符合举例的要求，所以除特殊说明外，所有示例程序都使用 go build -gcflags=all=&#34;-N -l&#34; &lt;name&gt;.go 的方式进行编译。 基本结构 1 2 3 4 5 6 7 8 package main import &#34;fmt&#34; func main() { fmt.Println(&#34;hello&#34;) panic(&#34;error&#34;) } 运行结果: $ ./hello hello panic: error goroutine 1 [running]: main.main() /Users/xxx/hello.go:7 +0x9f 从这个最基础的 stack trace 信息中可以看到是 /Users/xxx/hello.go 这个文件的第 7 行出错了，并且这个错误发生在 main package 的 main 这个函数中。 方法 上面是在函数中 panic 了，下面看一下方法中 panic 的 strace 信息。 非指针实例的方法： 1 2 3 4 5 6 7 8 9 10 11 12 package main type User struct{} func main() { var u User u.Name() } func (u User) Name() int { panic(&#34;error&#34;) } 运行结果: $ ./method panic: error goroutine 1 [running]: main.User.Name(0x0) /Users/xxx/method.go:11 +0x42 main.main() /Users/xxx/method.go:7 +0x22 上方的 main.User.Name(0x0) 中的 0x0 表示的是方法的返回值，这里是 0 。 指针实例的方法： 1 2 3 4 5 6 7 8 9 10 11 12 13 $ cat method.go package main type User struct{} func main() { var u User u.Name() } func (u *User) Name() int { panic(&#34;error&#34;) } 运行结果: $ ./method panic: error goroutine 1 [running]: main.(*User).Name(0xc000044788, 0x0) /Users/xxx/method.go:11 +0x42 main.main() /Users/xxx/method.go:7 +0x2b 上方的 main.(*User).Name(0xc000044788, 0x0) 中 0xc000044788 表示的是 u 的指针地址( &amp;u )。 0x0 表示的是方法的返回值，这里是 0 。 参数 下面举例说明一下函数或方法的参数在 trace 中是如何展示的。 int/float/bool/array int/float/bool/array 这些基本数据类型就是按本来的只显示的： 1 2 3 4 5 6 7 8 9 package main func main() { test(true, 2, 2.2, [3]int{1, 2, 3}) } func test(b bool, n int, f float32, arr [3]int) { panic(&#34;test&#34;) } 结果: $ ./base panic: test goroutine 1 [running]: main.test(0xc000044701, 0x2, 0x400ccccd, 0x1, 0x2, 0x3) /Users/xxx/base.go:8 +0x39 main.main() /Users/xxx/base.go:4 +0x55 结果解析: main.test( 0xc000044701, // 一个常量，表示 true, false 是 0xc000044700 （至少在我的机器上是两个值） 0x2, // 2 0x400ccccd, // 2.2 的 16 进制表示 0x1, 0x2, 0x3 // [3]int{1, 2, 3} ) string 1 2 3 4 5 6 7 8 9 package main func main() { test(&#34;test&#34;) } func test(s string) { panic(&#34;string&#34;) } 结果: $ ./string panic: string goroutine 1 [running]: main.test(0x1074265, 0x4) /Users/mg/tmp/test_go/strace/string.go:8 +0x39 main.main() /Users/mg/tmp/test_go/strace/string.go:4 +0x36 为啥这里 main.test(0x1074265, 0x4) 显示的是两个参数呢，因为字符串是用两个参数来表示的: 第一个参数是指向字符串底层数组的指针地址(0x1074265)，第二个参数是字符串的长度(0x4 表示长度为 4 )。 slice slice 的数据用三个参数来表示：第一个是指向底层数组的指针，第二个是长度，第三个是容量: goroutine 1 [running]: main.test(0xc000044758, 0x3, 0x3) /Users/xxx/slice.go:8 +0x39 main.main() /Users/xxx/slice.go:4 +0x8c map map 的话就是一个指针地址表示: goroutine 1 [running]: main.test(0xc000044648) /Users/xxx/map.go:10 +0x39 main.main() /Users/xxx/map.go:4 +0x139 struct 会显示 struct 中所有字段的值: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 package main func main() { u := User{ name: &#34;Tom&#34;, age: 233, } test(u) } type User struct { name string age int } func test(u User) { panic(&#34;test&#34;) } 结果: $ ./struct panic: test goroutine 1 [running]: main.test(0x1074474, 0x3, 0xe9) /Users/xxx/struct.go:17 +0x39 main.main() /Users/xxx/struct.go:8 +0x67 解析: main.test( 0x1074474, 0x3, // name 字段的值 &#34;Tom&#34;，0x1074474: 底层数组，0x3: 字符串长度 0xe9 // age 字段的值 233 的 16 进制表示 ) point 指针类型的话就显示一个指针地址: $ ./point panic: test goroutine 1 [running]: main.test(0xc000044770) /Users/xxx/point.go:17 +0x39 main.main() /Users/xxx/point.go:8 +0x5a interface interface 由两个参数表示，第一个是指向 interface 中存储类型信息的指针，第二个是指向真实数据的指针: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 package main type namer interface { Name() string } func main() { var u namer = &amp;User{ name: &#34;Tom&#34;, age: 233, } test(u) } type User struct { name string age int } func (u *User) Name() string { return u.name } func test(n namer) { panic(&#34;test&#34;) } 结果: $ ./interface panic: test goroutine 1 [running]: main.test(0x107c5c0, 0xc000044770) /Users/xxx/interface.go:25 +0x39 main.main() /Users/xxx/interface.go:12 +0x8c // 0x107c5c0 包含类型信息的指针地址 // 0xc000044770 实际数据的指针地址 多个参数用一个值表示 当多个连续的参数可以用一个值表示的时候，trace 中就会用一个值来表示多个参数的值，比如 1 2 3 4 5 6 7 8 9 package main func main() { test(1, 2, 3, 20, 30, 60) } func test(a, b, c, d, e, f uint8) { panic(&#34;test&#34;) } 结果: $ ./pack panic: test goroutine 1 [running]: main.test(0x3c1e14030201) /Users/mg/tmp/test_go/strace/pack.go:8 +0x39 main.main() /Users/mg/tmp/test_go/strace/pack.go:4 +0x30 0x3c1e14030201 是由下面6个值组成的: Bits Binary Hex Value 00-07 0000 0001 01 1 08-15 0000 0002 02 2 16-23 0000 0003 03 3 24-31 0001 0100 14 20 32-39 0001 1110 1e 30 40-47 0011 1100 3c 60 P.S. 等将来找到对应的源码后再补充更详细的合并规则 :joy traceback 中显示的值个数 最多只能显示 10 个值 ，超过 10 个时会用 ... 代替: 1 2 3 4 5 6 7 8 9 package main func main() { test([13]int{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13}) } func test(arr [13]int) { panic(&#34;test&#34;) } $ ./max panic: test goroutine 1 [running]: main.test(0x1, 0x2, 0x3, 0x4, 0x5, 0x6, 0x7, 0x8, 0x9, 0xa, ...) /Users/xxx/max.go:8 +0x39 main.main() /Users/xxx/max.go:4 +0x4c 参考资料 research!rsc: Go Data Structures research!rsc: Go Data Structures: Interfaces Understanding Go panic output – joe shaw Stack Traces In Go"/>
        <meta property="article:published_time" content="2019-05-02" />
            <meta property="article:section" content="go" />
            <meta property="article:tag" content="go" />
            <meta property="article:tag" content="debug" />
            <meta property="article:author" content="mozillazg" />
            <meta property="og:image"
                  content="https://mozillazg.com/static/avatar.jpeg"/>


    <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@mozillazg">
        <meta name="twitter:creator" content="@mozillazg">
    <meta name="twitter:domain" content="https://mozillazg.com">
            <meta property="twitter:image"
                  content="https://mozillazg.com/static/avatar.jpeg"/>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.4/dist/css/bootstrap.min.css" type="text/css"/>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/pygments-css@1.0.0/github.css" rel="stylesheet">
    <link rel="stylesheet" href="https://mozillazg.com/theme/css/style.css" type="text/css"/>
            <link href="https://mozillazg.com/static/custom.css" rel="stylesheet">

        <link href="https://mozillazg.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="mozillazg's Blog ATOM Feed"/>

        <link href="https://mozillazg.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="mozillazg's Blog RSS Feed"/>


        <link href="https://mozillazg.com/feeds/go.atom.xml" type="application/atom+xml" rel="alternate"
              title="mozillazg's Blog go ATOM Feed"/>


    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "publisher": {
            "@type": "Person",
            "name": "mozillazg",
            "logo": "https://mozillazg.com/static/avatar.jpeg"
        },
        "author": {
            "@type": "Person",
            "name": "mozillazg",
            "image": "https://mozillazg.com/static/avatar.jpeg",
            "url": "https://mozillazg.com",
            "sameAs": []
        },
        "headline": "Go: traceback 中包含的信息",
        "url": "https://mozillazg.com/2019/05/go-read-and-understand-info-from-stack-trace-traceback.html",
        "image": [
            "https://mozillazg.com/static/avatar.jpeg"
         ],
        "keywords": "go, debug",
        "description": "约定 示例使用的 Go 版本： go version go1.12.3 darwin/amd64 。 因为默认 go build 命令会在编译时进行一些优化导致举简单的示例程序的输出不符合举例的要求，所以除特殊说明外，所有示例程序都使用 go build -gcflags=all=&#34;-N -l&#34; &lt;name&gt;.go 的方式进行编译。 基本结构 1 2 3 4 5 6 7 8 package main import &#34;fmt&#34; func main() { fmt.Println(&#34;hello&#34;) panic(&#34;error&#34;) } 运行结果: $ ./hello hello panic: error goroutine 1 [running]: main.main() /Users/xxx/hello.go:7 +0x9f 从这个最基础的 stack trace 信息中可以看到是 /Users/xxx/hello.go 这个文件的第 7 行出错了，并且这个错误发生在 main package 的 main 这个函数中。 方法 上面是在函数中 panic 了，下面看一下方法中 panic 的 strace 信息。 非指针实例的方法： 1 2 3 4 5 6 7 8 9 10 11 12 package main type User struct{} func main() { var u User u.Name() } func (u User) Name() int { panic(&#34;error&#34;) } 运行结果: $ ./method panic: error goroutine 1 [running]: main.User.Name(0x0) /Users/xxx/method.go:11 +0x42 main.main() /Users/xxx/method.go:7 +0x22 上方的 main.User.Name(0x0) 中的 0x0 表示的是方法的返回值，这里是 0 。 指针实例的方法： 1 2 3 4 5 6 7 8 9 10 11 12 13 $ cat method.go package main type User struct{} func main() { var u User u.Name() } func (u *User) Name() int { panic(&#34;error&#34;) } 运行结果: $ ./method panic: error goroutine 1 [running]: main.(*User).Name(0xc000044788, 0x0) /Users/xxx/method.go:11 +0x42 main.main() /Users/xxx/method.go:7 +0x2b 上方的 main.(*User).Name(0xc000044788, 0x0) 中 0xc000044788 表示的是 u 的指针地址( &amp;u )。 0x0 表示的是方法的返回值，这里是 0 。 参数 下面举例说明一下函数或方法的参数在 trace 中是如何展示的。 int/float/bool/array int/float/bool/array 这些基本数据类型就是按本来的只显示的： 1 2 3 4 5 6 7 8 9 package main func main() { test(true, 2, 2.2, [3]int{1, 2, 3}) } func test(b bool, n int, f float32, arr [3]int) { panic(&#34;test&#34;) } 结果: $ ./base panic: test goroutine 1 [running]: main.test(0xc000044701, 0x2, 0x400ccccd, 0x1, 0x2, 0x3) /Users/xxx/base.go:8 +0x39 main.main() /Users/xxx/base.go:4 +0x55 结果解析: main.test( 0xc000044701, // 一个常量，表示 true, false 是 0xc000044700 （至少在我的机器上是两个值） 0x2, // 2 0x400ccccd, // 2.2 的 16 进制表示 0x1, 0x2, 0x3 // [3]int{1, 2, 3} ) string 1 2 3 4 5 6 7 8 9 package main func main() { test(&#34;test&#34;) } func test(s string) { panic(&#34;string&#34;) } 结果: $ ./string panic: string goroutine 1 [running]: main.test(0x1074265, 0x4) /Users/mg/tmp/test_go/strace/string.go:8 +0x39 main.main() /Users/mg/tmp/test_go/strace/string.go:4 +0x36 为啥这里 main.test(0x1074265, 0x4) 显示的是两个参数呢，因为字符串是用两个参数来表示的: 第一个参数是指向字符串底层数组的指针地址(0x1074265)，第二个参数是字符串的长度(0x4 表示长度为 4 )。 slice slice 的数据用三个参数来表示：第一个是指向底层数组的指针，第二个是长度，第三个是容量: goroutine 1 [running]: main.test(0xc000044758, 0x3, 0x3) /Users/xxx/slice.go:8 +0x39 main.main() /Users/xxx/slice.go:4 +0x8c map map 的话就是一个指针地址表示: goroutine 1 [running]: main.test(0xc000044648) /Users/xxx/map.go:10 +0x39 main.main() /Users/xxx/map.go:4 +0x139 struct 会显示 struct 中所有字段的值: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 package main func main() { u := User{ name: &#34;Tom&#34;, age: 233, } test(u) } type User struct { name string age int } func test(u User) { panic(&#34;test&#34;) } 结果: $ ./struct panic: test goroutine 1 [running]: main.test(0x1074474, 0x3, 0xe9) /Users/xxx/struct.go:17 +0x39 main.main() /Users/xxx/struct.go:8 +0x67 解析: main.test( 0x1074474, 0x3, // name 字段的值 &#34;Tom&#34;，0x1074474: 底层数组，0x3: 字符串长度 0xe9 // age 字段的值 233 的 16 进制表示 ) point 指针类型的话就显示一个指针地址: $ ./point panic: test goroutine 1 [running]: main.test(0xc000044770) /Users/xxx/point.go:17 +0x39 main.main() /Users/xxx/point.go:8 +0x5a interface interface 由两个参数表示，第一个是指向 interface 中存储类型信息的指针，第二个是指向真实数据的指针: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 package main type namer interface { Name() string } func main() { var u namer = &amp;User{ name: &#34;Tom&#34;, age: 233, } test(u) } type User struct { name string age int } func (u *User) Name() string { return u.name } func test(n namer) { panic(&#34;test&#34;) } 结果: $ ./interface panic: test goroutine 1 [running]: main.test(0x107c5c0, 0xc000044770) /Users/xxx/interface.go:25 +0x39 main.main() /Users/xxx/interface.go:12 +0x8c // 0x107c5c0 包含类型信息的指针地址 // 0xc000044770 实际数据的指针地址 多个参数用一个值表示 当多个连续的参数可以用一个值表示的时候，trace 中就会用一个值来表示多个参数的值，比如 1 2 3 4 5 6 7 8 9 package main func main() { test(1, 2, 3, 20, 30, 60) } func test(a, b, c, d, e, f uint8) { panic(&#34;test&#34;) } 结果: $ ./pack panic: test goroutine 1 [running]: main.test(0x3c1e14030201) /Users/mg/tmp/test_go/strace/pack.go:8 +0x39 main.main() /Users/mg/tmp/test_go/strace/pack.go:4 +0x30 0x3c1e14030201 是由下面6个值组成的: Bits Binary Hex Value 00-07 0000 0001 01 1 08-15 0000 0002 02 2 16-23 0000 0003 03 3 24-31 0001 0100 14 20 32-39 0001 1110 1e 30 40-47 0011 1100 3c 60 P.S. 等将来找到对应的源码后再补充更详细的合并规则 :joy traceback 中显示的值个数 最多只能显示 10 个值 ，超过 10 个时会用 ... 代替: 1 2 3 4 5 6 7 8 9 package main func main() { test([13]int{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13}) } func test(arr [13]int) { panic(&#34;test&#34;) } $ ./max panic: test goroutine 1 [running]: main.test(0x1, 0x2, 0x3, 0x4, 0x5, 0x6, 0x7, 0x8, 0x9, 0xa, ...) /Users/xxx/max.go:8 +0x39 main.main() /Users/xxx/max.go:4 +0x4c 参考资料 research!rsc: Go Data Structures research!rsc: Go Data Structures: Interfaces Understanding Go panic output – joe shaw Stack Traces In Go",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https://mozillazg.com/2019/05/go-read-and-understand-info-from-stack-trace-traceback.html"
        },
        "datePublished": "2019-05-02"
    }
    </script>

</head>
<body>

<div class="navbar" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://mozillazg.com/" class="navbar-brand">
mozillazg's Blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="https://mozillazg.com/feeds/all.atom.xml">Feed</a></li>
                    <li><a href="/2014/10/pages/about-me.html">About</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://mozillazg.com/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-lg-12">
    <section id="content" class="yue">
        <article>
            <header class="text-center">
                <h1>
                    <a href="https://mozillazg.com/2019/05/go-read-and-understand-info-from-stack-trace-traceback.html"
                       rel="bookmark"
                       title="Permalink to Go: traceback 中包含的信息">
                        Go: traceback 中包含的信息
                    </a>
                </h1>
                <p class="published">
                    <time datetime="2019-05-02T00:00:00+00:00">
                    2019-05-02
                    </time>
                </p>
            </header>
            <div class="entry-content">
                <div class="well-sm article-info">
<footer class="post-info">
        <a href="https://mozillazg.com/category/go.html">go</a>


<span class="label label-default hide">Tags</span>
	<a href="https://mozillazg.com/tag/debug.html">debug</a>
    
</footer><!-- /.post-info -->                </div>
                <div class="js-toc"></div>
                <div>
                <div class="section" id="section-1">
<h2 id="hidsection-1">约定<a class="headerlink" href="#hidsection-1" title="Permalink to this headline">¶</a></h2>
<p>示例使用的 Go 版本： <tt class="docutils literal">go version go1.12.3 darwin/amd64</tt> 。</p>
<p>因为默认 <tt class="docutils literal">go build</tt> 命令会在编译时进行一些优化导致举简单的示例程序的输出不符合举例的要求，所以除特殊说明外，所有示例程序都使用 <tt class="docutils literal">go build <span class="pre">-gcflags=all=&quot;-N</span> <span class="pre">-l&quot;</span> <span class="pre">&lt;name&gt;.go</span></tt> 的方式进行编译。</p>
</div>
<div class="section" id="section-2">
<h2 id="hidsection-2">基本结构<a class="headerlink" href="#hidsection-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="s">&quot;fmt&quot;</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span>
<span class="hll"><span class="w">     </span><span class="nb">panic</span><span class="p">(</span><span class="s">&quot;error&quot;</span><span class="p">)</span>
</span><span class="w"> </span><span class="p">}</span>
</pre></div></td></tr></table></div>
<p>运行结果:</p>
<div class="highlight"><pre><span></span><span class="w"> </span>$<span class="w"> </span>./hello
<span class="w"> </span>hello
<span class="w"> </span>panic:<span class="w"> </span>error

<span class="w"> </span>goroutine<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>running<span class="o">]</span>:
<span class="hll"><span class="w"> </span>main.main<span class="o">()</span>
</span><span class="hll"><span class="w">     </span>/Users/xxx/hello.go:7<span class="w"> </span>+0x9f
</span></pre></div>
<p>从这个最基础的 stack trace 信息中可以看到是 <tt class="docutils literal">/Users/xxx/hello.go</tt> 这个文件的第 7 行出错了，并且这个错误发生在 main package 的 main 这个函数中。</p>
<div class="section" id="section-3">
<h3 id="hidsection-3">方法<a class="headerlink" href="#hidsection-3" title="Permalink to this headline">¶</a></h3>
<p>上面是在函数中 panic 了，下面看一下方法中 panic 的 strace 信息。</p>
<p>非指针实例的方法：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="w"> </span><span class="kd">type</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="kd">struct</span><span class="p">{}</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="kd">var</span><span class="w"> </span><span class="nx">u</span><span class="w"> </span><span class="nx">User</span>
<span class="w">     </span><span class="nx">u</span><span class="p">.</span><span class="nx">Name</span><span class="p">()</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">u</span><span class="w"> </span><span class="nx">User</span><span class="p">)</span><span class="w"> </span><span class="nx">Name</span><span class="p">()</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">     </span><span class="nb">panic</span><span class="p">(</span><span class="s">&quot;error&quot;</span><span class="p">)</span>
</span><span class="w"> </span><span class="p">}</span>
</pre></div></td></tr></table></div>
<p>运行结果:</p>
<div class="highlight"><pre><span></span><span class="w"> </span>$<span class="w"> </span>./method
<span class="w"> </span>panic:<span class="w"> </span>error

<span class="w"> </span>goroutine<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>running<span class="o">]</span>:
<span class="hll"><span class="w"> </span>main.User.Name<span class="o">(</span>0x0<span class="o">)</span>
</span><span class="hll"><span class="w">     </span>/Users/xxx/method.go:11<span class="w"> </span>+0x42
</span><span class="w"> </span>main.main<span class="o">()</span>
<span class="w">     </span>/Users/xxx/method.go:7<span class="w"> </span>+0x22
</pre></div>
<p>上方的 <tt class="docutils literal">main.User.Name(0x0)</tt> 中的 <tt class="docutils literal">0x0</tt> 表示的是方法的返回值，这里是 <tt class="docutils literal">0</tt> 。</p>
<p>指针实例的方法：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="nx">cat</span><span class="w"> </span><span class="nx">method</span><span class="p">.</span><span class="k">go</span>
<span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="w"> </span><span class="kd">type</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="kd">struct</span><span class="p">{}</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="kd">var</span><span class="w"> </span><span class="nx">u</span><span class="w"> </span><span class="nx">User</span>
<span class="w">     </span><span class="nx">u</span><span class="p">.</span><span class="nx">Name</span><span class="p">()</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">u</span><span class="w"> </span><span class="o">*</span><span class="nx">User</span><span class="p">)</span><span class="w"> </span><span class="nx">Name</span><span class="p">()</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">     </span><span class="nb">panic</span><span class="p">(</span><span class="s">&quot;error&quot;</span><span class="p">)</span>
</span><span class="w"> </span><span class="p">}</span>
</pre></div></td></tr></table></div>
<p>运行结果:</p>
<div class="highlight"><pre><span></span><span class="w"> </span>$<span class="w"> </span>./method
<span class="w"> </span>panic:<span class="w"> </span>error

<span class="w"> </span>goroutine<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>running<span class="o">]</span>:
<span class="hll"><span class="w"> </span>main.<span class="o">(</span>*User<span class="o">)</span>.Name<span class="o">(</span>0xc000044788,<span class="w"> </span>0x0<span class="o">)</span>
</span><span class="hll"><span class="w">     </span>/Users/xxx/method.go:11<span class="w"> </span>+0x42
</span><span class="w"> </span>main.main<span class="o">()</span>
<span class="w">     </span>/Users/xxx/method.go:7<span class="w"> </span>+0x2b
</pre></div>
<p>上方的 <tt class="docutils literal"><span class="pre">main.(*User).Name(0xc000044788,</span> 0x0)</tt> 中</p>
<ul class="simple">
<li><tt class="docutils literal">0xc000044788</tt> 表示的是 <tt class="docutils literal">u</tt> 的指针地址( <tt class="docutils literal">&amp;u</tt> )。</li>
<li><tt class="docutils literal">0x0</tt> 表示的是方法的返回值，这里是 <tt class="docutils literal">0</tt> 。</li>
</ul>
</div>
</div>
<div class="section" id="section-4">
<h2 id="hidsection-4">参数<a class="headerlink" href="#hidsection-4" title="Permalink to this headline">¶</a></h2>
<p>下面举例说明一下函数或方法的参数在 trace 中是如何展示的。</p>
<div class="section" id="int-float-bool-array">
<h3 id="hidint-float-bool-array">int/float/bool/array<a class="headerlink" href="#hidint-float-bool-array" title="Permalink to this headline">¶</a></h3>
<p>int/float/bool/array 这些基本数据类型就是按本来的只显示的：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nx">test</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mf">2.2</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">})</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">f</span><span class="w"> </span><span class="kt">float32</span><span class="p">,</span><span class="w"> </span><span class="nx">arr</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">     </span><span class="nb">panic</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
</span><span class="w"> </span><span class="p">}</span>
</pre></div></td></tr></table></div>
<p>结果:</p>
<div class="highlight"><pre><span></span><span class="w"> </span>$<span class="w"> </span>./base
<span class="w"> </span>panic:<span class="w"> </span><span class="nb">test</span>

<span class="w"> </span>goroutine<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>running<span class="o">]</span>:
<span class="hll"><span class="w"> </span>main.test<span class="o">(</span>0xc000044701,<span class="w"> </span>0x2,<span class="w"> </span>0x400ccccd,<span class="w"> </span>0x1,<span class="w"> </span>0x2,<span class="w"> </span>0x3<span class="o">)</span>
</span><span class="hll"><span class="w">     </span>/Users/xxx/base.go:8<span class="w"> </span>+0x39
</span><span class="w"> </span>main.main<span class="o">()</span>
<span class="w">     </span>/Users/xxx/base.go:4<span class="w"> </span>+0x55
</pre></div>
<p>结果解析:</p>
<pre class="literal-block">
main.test(
    0xc000044701,   // 一个常量，表示 true, false 是 0xc000044700 （至少在我的机器上是两个值）
    0x2,            // 2
    0x400ccccd,     // 2.2 的 16 进制表示
    0x1, 0x2, 0x3   // [3]int{1, 2, 3}
    )
</pre>
</div>
<div class="section" id="string">
<h3 id="hidstring">string<a class="headerlink" href="#hidstring" title="Permalink to this headline">¶</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nx">test</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">test</span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">     </span><span class="nb">panic</span><span class="p">(</span><span class="s">&quot;string&quot;</span><span class="p">)</span>
</span><span class="w"> </span><span class="p">}</span>
</pre></div></td></tr></table></div>
<p>结果:</p>
<div class="highlight"><pre><span></span><span class="w"> </span>$<span class="w"> </span>./string
<span class="w"> </span>panic:<span class="w"> </span>string

<span class="w"> </span>goroutine<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>running<span class="o">]</span>:
<span class="hll"><span class="w"> </span>main.test<span class="o">(</span>0x1074265,<span class="w"> </span>0x4<span class="o">)</span>
</span><span class="hll"><span class="w">     </span>/Users/mg/tmp/test_go/strace/string.go:8<span class="w"> </span>+0x39
</span><span class="w"> </span>main.main<span class="o">()</span>
<span class="w">     </span>/Users/mg/tmp/test_go/strace/string.go:4<span class="w"> </span>+0x36
</pre></div>
<p>为啥这里 <tt class="docutils literal">main.test(0x1074265, 0x4)</tt> 显示的是两个参数呢，因为字符串是用两个参数来表示的: 第一个参数是指向字符串底层数组的指针地址(<tt class="docutils literal">0x1074265</tt>)，第二个参数是字符串的长度(<tt class="docutils literal">0x4</tt> 表示长度为 4 )。</p>
</div>
<div class="section" id="slice">
<h3 id="hidslice">slice<a class="headerlink" href="#hidslice" title="Permalink to this headline">¶</a></h3>
<p>slice 的数据用三个参数来表示：第一个是指向底层数组的指针，第二个是长度，第三个是容量:</p>
<div class="highlight"><pre><span></span><span class="w"> </span>goroutine<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>running<span class="o">]</span>:
<span class="hll"><span class="w"> </span>main.test<span class="o">(</span>0xc000044758,<span class="w"> </span>0x3,<span class="w"> </span>0x3<span class="o">)</span>
</span><span class="hll"><span class="w">     </span>/Users/xxx/slice.go:8<span class="w"> </span>+0x39
</span><span class="w"> </span>main.main<span class="o">()</span>
<span class="w">     </span>/Users/xxx/slice.go:4<span class="w"> </span>+0x8c
</pre></div>
</div>
<div class="section" id="map">
<h3 id="hidmap">map<a class="headerlink" href="#hidmap" title="Permalink to this headline">¶</a></h3>
<p>map 的话就是一个指针地址表示:</p>
<div class="highlight"><pre><span></span><span class="w"> </span>goroutine<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>running<span class="o">]</span>:
<span class="hll"><span class="w"> </span>main.test<span class="o">(</span>0xc000044648<span class="o">)</span>
</span><span class="hll"><span class="w">     </span>/Users/xxx/map.go:10<span class="w"> </span>+0x39
</span><span class="w"> </span>main.main<span class="o">()</span>
<span class="w">     </span>/Users/xxx/map.go:4<span class="w"> </span>+0x139
</pre></div>
</div>
<div class="section" id="struct">
<h3 id="hidstruct">struct<a class="headerlink" href="#hidstruct" title="Permalink to this headline">¶</a></h3>
<p>会显示 struct 中所有字段的值:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nx">u</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">User</span><span class="p">{</span>
<span class="w">         </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Tom&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nx">age</span><span class="p">:</span><span class="w">  </span><span class="mi">233</span><span class="p">,</span>
<span class="w">     </span><span class="p">}</span>
<span class="w">     </span><span class="nx">test</span><span class="p">(</span><span class="nx">u</span><span class="p">)</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="kd">type</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span>
<span class="w">     </span><span class="nx">age</span><span class="w">  </span><span class="kt">int</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">test</span><span class="p">(</span><span class="nx">u</span><span class="w"> </span><span class="nx">User</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">     </span><span class="nb">panic</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
</span><span class="w"> </span><span class="p">}</span>
</pre></div></td></tr></table></div>
<p>结果:</p>
<div class="highlight"><pre><span></span><span class="w"> </span>$<span class="w"> </span>./struct
<span class="w"> </span>panic:<span class="w"> </span><span class="nb">test</span>

<span class="w"> </span>goroutine<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>running<span class="o">]</span>:
<span class="hll"><span class="w"> </span>main.test<span class="o">(</span>0x1074474,<span class="w"> </span>0x3,<span class="w"> </span>0xe9<span class="o">)</span>
</span><span class="hll"><span class="w">     </span>/Users/xxx/struct.go:17<span class="w"> </span>+0x39
</span><span class="w"> </span>main.main<span class="o">()</span>
<span class="w">     </span>/Users/xxx/struct.go:8<span class="w"> </span>+0x67
</pre></div>
<p>解析:</p>
<pre class="literal-block">
main.test(
    0x1074474, 0x3,  // name 字段的值 &quot;Tom&quot;，0x1074474: 底层数组，0x3: 字符串长度
    0xe9             // age 字段的值 233 的 16 进制表示
)
</pre>
</div>
<div class="section" id="point">
<h3 id="hidpoint">point<a class="headerlink" href="#hidpoint" title="Permalink to this headline">¶</a></h3>
<p>指针类型的话就显示一个指针地址:</p>
<div class="highlight"><pre><span></span><span class="w"> </span>$<span class="w"> </span>./point
<span class="w"> </span>panic:<span class="w"> </span><span class="nb">test</span>

<span class="w"> </span>goroutine<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>running<span class="o">]</span>:
<span class="hll"><span class="w"> </span>main.test<span class="o">(</span>0xc000044770<span class="o">)</span>
</span><span class="hll"><span class="w">     </span>/Users/xxx/point.go:17<span class="w"> </span>+0x39
</span><span class="w"> </span>main.main<span class="o">()</span>
<span class="w">     </span>/Users/xxx/point.go:8<span class="w"> </span>+0x5a
</pre></div>
</div>
<div class="section" id="interface">
<h3 id="hidinterface">interface<a class="headerlink" href="#hidinterface" title="Permalink to this headline">¶</a></h3>
<p>interface 由两个参数表示，第一个是指向 interface 中存储类型信息的指针，第二个是指向真实数据的指针:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="w"> </span><span class="kd">type</span><span class="w"> </span><span class="nx">namer</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nx">Name</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="kd">var</span><span class="w"> </span><span class="nx">u</span><span class="w"> </span><span class="nx">namer</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">User</span><span class="p">{</span>
<span class="w">         </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Tom&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nx">age</span><span class="p">:</span><span class="w">  </span><span class="mi">233</span><span class="p">,</span>
<span class="w">     </span><span class="p">}</span>
<span class="w">     </span><span class="nx">test</span><span class="p">(</span><span class="nx">u</span><span class="p">)</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="kd">type</span><span class="w"> </span><span class="nx">User</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span>
<span class="w">     </span><span class="nx">age</span><span class="w">  </span><span class="kt">int</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">u</span><span class="w"> </span><span class="o">*</span><span class="nx">User</span><span class="p">)</span><span class="w"> </span><span class="nx">Name</span><span class="p">()</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="nx">u</span><span class="p">.</span><span class="nx">name</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">test</span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="nx">namer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">     </span><span class="nb">panic</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
</span><span class="w"> </span><span class="p">}</span>
</pre></div></td></tr></table></div>
<p>结果:</p>
<div class="highlight"><pre><span></span><span class="w"> </span>$<span class="w"> </span>./interface
<span class="w"> </span>panic:<span class="w"> </span><span class="nb">test</span>

<span class="w"> </span>goroutine<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>running<span class="o">]</span>:
<span class="hll"><span class="w"> </span>main.test<span class="o">(</span>0x107c5c0,<span class="w"> </span>0xc000044770<span class="o">)</span>
</span><span class="hll"><span class="w">     </span>/Users/xxx/interface.go:25<span class="w"> </span>+0x39
</span><span class="w"> </span>main.main<span class="o">()</span>
<span class="w">     </span>/Users/xxx/interface.go:12<span class="w"> </span>+0x8c

<span class="w"> </span>//<span class="w"> </span>0x107c5c0<span class="w"> </span>包含类型信息的指针地址
<span class="w"> </span>//<span class="w"> </span>0xc000044770<span class="w"> </span>实际数据的指针地址
</pre></div>
</div>
<div class="section" id="section-5">
<h3 id="hidsection-5">多个参数用一个值表示<a class="headerlink" href="#hidsection-5" title="Permalink to this headline">¶</a></h3>
<p>当多个连续的参数可以用一个值表示的时候，trace 中就会用一个值来表示多个参数的值，比如</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nx">test</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">)</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">,</span><span class="w"> </span><span class="nx">d</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="p">,</span><span class="w"> </span><span class="nx">f</span><span class="w"> </span><span class="kt">uint8</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">     </span><span class="nb">panic</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
</span><span class="w"> </span><span class="p">}</span>
</pre></div></td></tr></table></div>
<p>结果:</p>
<div class="highlight"><pre><span></span><span class="w"> </span>$<span class="w"> </span>./pack
<span class="w"> </span>panic:<span class="w"> </span><span class="nb">test</span>

<span class="w"> </span>goroutine<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>running<span class="o">]</span>:
<span class="hll"><span class="w"> </span>main.test<span class="o">(</span>0x3c1e14030201<span class="o">)</span>
</span><span class="hll"><span class="w">     </span>/Users/mg/tmp/test_go/strace/pack.go:8<span class="w"> </span>+0x39
</span><span class="w"> </span>main.main<span class="o">()</span>
<span class="w">     </span>/Users/mg/tmp/test_go/strace/pack.go:4<span class="w"> </span>+0x30
</pre></div>
<p><tt class="docutils literal">0x3c1e14030201</tt> 是由下面6个值组成的:</p>
<pre class="literal-block">
Bits     Binary     Hex     Value
00-07    0000 0001  01      1
08-15    0000 0002  02      2
16-23    0000 0003  03      3
24-31    0001 0100  14      20
32-39    0001 1110  1e      30
40-47    0011 1100  3c      60
</pre>
<p>P.S. 等将来找到对应的源码后再补充更详细的合并规则 :joy</p>
</div>
<div class="section" id="traceback">
<h3 id="hidtraceback">traceback 中显示的值个数<a class="headerlink" href="#hidtraceback" title="Permalink to this headline">¶</a></h3>
<p>最多只能显示 <a class="reference external" href="https://github.com/golang/go/blob/59ea685ce96a696281e56badd80d2e5dd618b0b0/src/runtime/traceback.go#L435-L437">10 个值</a> ，超过 10 个时会用 <tt class="docutils literal">...</tt> 代替:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><span class="w"> </span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nx">test</span><span class="p">([</span><span class="mi">13</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">})</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nx">test</span><span class="p">(</span><span class="nx">arr</span><span class="w"> </span><span class="p">[</span><span class="mi">13</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">     </span><span class="nb">panic</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">)</span>
</span><span class="w"> </span><span class="p">}</span>
</pre></div></td></tr></table></div>
<div class="highlight"><pre><span></span><span class="w"> </span>$<span class="w"> </span>./max
<span class="w"> </span>panic:<span class="w"> </span><span class="nb">test</span>

<span class="w"> </span>goroutine<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">[</span>running<span class="o">]</span>:
<span class="hll"><span class="w"> </span>main.test<span class="o">(</span>0x1,<span class="w"> </span>0x2,<span class="w"> </span>0x3,<span class="w"> </span>0x4,<span class="w"> </span>0x5,<span class="w"> </span>0x6,<span class="w"> </span>0x7,<span class="w"> </span>0x8,<span class="w"> </span>0x9,<span class="w"> </span>0xa,<span class="w"> </span>...<span class="o">)</span>
</span><span class="hll"><span class="w">     </span>/Users/xxx/max.go:8<span class="w"> </span>+0x39
</span><span class="w"> </span>main.main<span class="o">()</span>
<span class="w">     </span>/Users/xxx/max.go:4<span class="w"> </span>+0x4c
</pre></div>
</div>
</div>
<div class="section" id="section-6">
<h2 id="hidsection-6">参考资料<a class="headerlink" href="#hidsection-6" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://research.swtch.com/godata">research!rsc: Go Data Structures</a></li>
<li><a class="reference external" href="https://research.swtch.com/interfaces">research!rsc: Go Data Structures: Interfaces</a></li>
<li><a class="reference external" href="https://www.joeshaw.org/understanding-go-panic-output/">Understanding Go panic output – joe shaw</a></li>
<li><a class="reference external" href="https://www.ardanlabs.com/blog/2015/01/stack-traces-in-go.html">Stack Traces In Go</a></li>
</ul>
</div>

                </div>
            </div>
            <!-- /.entry-content -->
<section class="text-center">
  
<div id="donate"></div>

<div class="social-share"></div>
<div class="social-comment-note">
<p>有任何建议和想法欢迎在下方评论区留言或者加我<a href="/static/wechat.png">微信</a>交流</p>
</div>

</section>
<section class="well" id="related-posts">
    <p>Related Posts:</p>
    <ul>
        <li><a href="https://mozillazg.com/2020/04/use-tcpdump-for-a-container-but-outside-container.html">一个在容器外用 tcpdump 命令对容器内的网络请求抓包的方法</a></li>
        <li><a href="https://mozillazg.com/2020/04/nsenter-usage.html">nsenter 常用操作</a></li>
        <li><a href="https://mozillazg.com/2019/03/linux-debug-with-strace-cookbook-examples.html">strace 常用操作</a></li>
        <li><a href="https://mozillazg.com/2018/07/python-some-ways-to-debug-running-process.html">Python: 调试运行中进程的几种方法（总结）</a></li>
        <li><a href="https://mozillazg.com/2017/12/python-debug-running-process-threading-gevent-eventlet-asyncio-via-preset-backdoor.html">Python: 通过预置后门（调试接口）的方式调试运行中的进程</a></li>
    </ul>
</section>
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'my-github-blog'; // required: replace example with your forum shortname

                    var disqus_identifier = 'go-read-and-understand-info-from-stack-trace-traceback';
                var disqus_url = 'https://mozillazg.com/2019/05/go-read-and-understand-info-from-stack-trace-traceback.html';

            var disqus_config = function () {
                this.language = "";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2023 mozillazg
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>
            &middot; <a href="/privacy-policy.html" target="_blank">Privacy</a>              <p><small>  <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="/static/images/by-sa-80x15.png" /></a>
    &quot;<span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">mozillazg's Blog</span>&quot; by <a xmlns:cc="http://creativecommons.org/ns#" href="https://mozillazg.com" property="cc:attributionName" rel="cc:attributionURL">mozillazg</a> is
  licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>, except where indicated otherwise.
</small></p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/jquery@2.1.1/dist/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'my-github-blog'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics Universal -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-77172981-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics Universal Code -->

<!-- share.js -->
<script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script>



<script src="https://cdn.jsdelivr.net/npm/tocbot@3.0.2/dist/tocbot.min.js"></script>
<script>
$(document).ready(function(){
  tocbot.init({
    // Where to render the table of contents.
    tocSelector: '.js-toc',
    // Where to grab the headings to build the table of contents.
    contentSelector: '.entry-content',
    // Which headings to grab inside of the contentSelector element.
    headingSelector: 'h2, h3, h4,h5',
    // Headings that match the ignoreSelector will be skipped.
    ignoreSelector: '.js-toc-ignore',
    // Main class to add to links.
    linkClass: 'toc-link',
    // Extra classes to add to links.
    extraLinkClasses: '',
    // Class to add to active links,
    // the link corresponding to the top most heading on the page.
    activeLinkClass: 'is-active-link',
    // Main class to add to lists.
    listClass: 'toc-list',
    // Extra classes to add to lists.
    extraListClasses: '',
    // Class that gets added when a list should be collapsed.
    isCollapsedClass: 'is-collapsed',
    // Class that gets added when a list should be able
    // to be collapsed but isn't necessarily collpased.
    collapsibleClass: 'is-collapsible',
    // Class to add to list items.
    listItemClass: 'toc-list-item',
    // How many heading levels should not be collpased.
    // For example, number 6 will show everything since
    // there are only 6 heading levels and number 0 will collpase them all.
    // The sections that are hidden will open
    // and close as you scroll to headings within them.
    collapseDepth: 6,
    // Smooth scrolling enabled.
    smoothScroll: true,
    // Smooth scroll duration.
    smoothScrollDuration: 420,
    // Callback for scroll end (requires: smoothScroll).
    scrollEndCallback: function (e) {},
    // Headings offset between the headings and the top of the document (this is meant for minor adjustments).
    headingsOffset: 0,
    // Timeout between events firing to make sure it's
    // not too rapid (for performance reasons).
    throttleTimeout: 50,
    // Element to add the positionFixedClass to.
    positionFixedSelector: null,
    // Fixed position class to add to make sidebar fixed after scrolling
    // down past the fixedSidebarOffset.
    positionFixedClass: 'is-position-fixed',
    // fixedSidebarOffset can be any number but by default is set
    // to auto which sets the fixedSidebarOffset to the sidebar
    // element's offsetTop from the top of the document on init.
    fixedSidebarOffset: 'auto',
    // includeHtml can be set to true to include the HTML markup from the
    // heading node instead of just including the textContent.
    includeHtml: false
  });
});
</script>
</body>
</html>